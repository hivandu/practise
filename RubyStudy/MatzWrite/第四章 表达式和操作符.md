一个表达式就是一块Ruby代码。Ruby中，表达式和语句之间没有清晰地界限。

### 4.1 字面量和关键字字面量
字面量就时一些诸如1.0、hello world及［］的值，它们是被直接嵌入你地程序文本中的。

某些Ruby关键字事基本表达式，可以把它们当作关键字字面量或特殊形式地变量引用：

    nil       求值为nil，属于NilClass类
    true      求值为TrueClass类地单键实例，十一个代表了布尔值true的对象
    false     求值为FalseClass类地单键实例，是一个代表了布尔值false的对象
    self      求值为当前对象
    _FILE_    求值为一个字符串，该字符串包含了Ruby解释器正在执行地文件名称。
    _LINE_    求值为一个整数，表示当前代码地行数，该代码属于_FILE_所代表地文件
    _ENCODING_  求值为一个Encoding对象，该对象指定了当前文件的编码（Ruby1.9）

### 4.2 变量引用
一个变量就是一个值地名字。通过赋值表达式可以创建变量并对其赋值。

#### 未初始化的变量
###### 类变量
  引用一个未被赋值的类变量，Ruby将抛出一个NameError。
###### 实例变量
  Ruby将返回nil。如果调用Ruby解释器时使用-w选项，Ruby将针对未初始化地变量发出一个警告。
###### 局部变量
  
### 4.3 常量引用
### 4.4 方法调用
四部分组成
* 一个任意地表达式，它的值就是将要在其上调用该方法的对象。
* 被调用地方法名称。
* 将要传递给该方法地参数值。
* 一个可选地代码块，位于一对花括号或一个do/end中。方法刻意使用yield关键字对该代码块进行调用。

一个方法调用表达式的值就是方法体中最后一个被求值地表达式地值。

    puts "hello world"
    Math.sqrt(2)
    message.length
    a.each {|x| p x}

### 4.5 赋值
Ruby中有三种不同形式地复制表达式。
    * x = 1             # Set the lvalue x to the value 1
    * x += 1            # Set the lvalue x to the value x + 1
    * x, y, z = 1, 2, 3 # Set x to 1, y to 2 and z to 3

#### 对变量进行赋值
对像之外，Ruby地实例变量是永远不可见的，而且实例变量名永远不会被对像名来限定修饰。
    point.x, point.y = 1, 2
    这个表达式地左值不是变量，而是属性。

为了消除二义性，Ruby将一个标识符当作局部变量来处理，只要它之前见到了对这个变量地赋值操作即可，即便这个赋值操作并没有被执行也是如此。

    class Ambiguous
      def x; 1; end

      def test
        puts x
        x = 0 if false
        puts x
        x = 2
        puts x
      end
    end

#### 对常量赋值

* 对一个已经存在地常量进行赋值会导致Ruby发出一个警告，然而Ruby仍然会执行这个赋值。
* 在方法体内部是不允许对常量进行赋值的。

与变量不同，只有在Ruby解释器真正地执行了对常量地赋值表达式之后，常量才会存在。

#### 对属性和数组元素的赋值
Ruby中对属性或数组元素地赋值其实是对方法调用地简写。

        o[x, y] = z
        o.[] = (x, y, z)

以上两个表达式事等价地。

#### 缩写形式的赋值
缩写形式地赋值是一种将赋值和其他操作结合在一起地赋值操作。`x += 1`
`+=`并不是一个真正地Ruby操作符，上述表达式只是一个缩写：`x = x + 1`

        **缩写形式地赋值伪操作符**
        x += y              x = x + y
        x -= y              x = x - y
        x *= y              x = x * y
        x /= y              x = x / y
        x %= y              x = x % y
        x **= y             x = x ** y
        x &&= y             x = x && y
        x ||= y             x = x || y
        x &= y              x = x & y
        x |= y              x = x | y
        x ^= y              x = x ^ y
        x <<= y             x = x << y
        x >>= y             x = x >> y

#### 并行赋值
##### 左值和右值的数量相等

        x, y, z = 1, 2, 3

##### 一个左值，多个右值
        
        x = 1, 2, 3     # x = [1, 2, 3]

##### 多个左值，一个数组右值
        
        x, y , z = [1, 2, 3]    # Same as x, y, z = 1, 2, 3

##### 左值和右值的数量不同

        x, y, z = 1, 2      # x=1; y=2; z=nil

        x, y = 1, 2, 3      # x=1; y=; 3is not assigned anywhere

##### 展开操作符
        
        x, y, z = 1, *[2, 3]    # Same as x,y,z = 1,2,3

        x, *y = 1, 2, 3     # x=1; y=[2.3]
        x, *y = 1, 2        # x=1; y=[2]
        x, *y = 1           # x=1; y=[]

        #Ruby 1.9 only
        *x, y = 1,2,3       # x=[1,2]; y=3
        *x, y = 1,2         # x=[1]; y=2
        *x,y =1             # x=[]; y=1

        x, y, *z = 1, *[2,3,4]  # x=1; y=2; z=[3,4]

##### 并行赋值中的圆括号

        x, (y, z) = a, b
        实际上是同时进行两个赋值操作：
        x = a
        y,z = b

##### 并行赋值的值
        
        可能会像下面这样编写代码，将其打印出来：
        puts x,y = 1,2
        但是这行不通。会传递三个参数：x，y=1， 以及2.
        接下来：
        puts (x,y=1,2)
        如此也行不通，因为括号本身也会被解释成方法调用地一部分。
        为了达到目的，只有如此：
        puts((x,y=1,2))

### 4.6 操作符
大多数算数操作符都是左结合地，求幂操作是右结合的。因此`2**3**4`会是`2**(3**4)`地方式求值。

#### 一元+和-
#### 求幂操作符： **
#### 算术操作符
#### 移位和追加操作符：<<和>>
#### 补，并，交操作符: ~, &, |及^
`~`将整数操作数每个0位设置成1，而将每个1位设置成0.对于任意整数x来说，~x和-x-1是一样地。
`&`是针对两个整数地二进制与操作符。只有在两个操作数对应地位均为1时候，结果中相应地位才会被设置成1.
`^`是针对两个整数地二进制异或（排他地或）操作符。

#### 比较操作符：
#### 相等性操作符: ==, !=, =~, !~和===
#### 布尔操作符:&&, ||, !, and, or, not
注意优先级

#### 范围和Flip-Flops： ..和...
##### 称为flip-flop的布尔表达式
